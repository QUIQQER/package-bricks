{assign var=siteLang value=$Project->getLang()}
{assign var=all value=$this->getAttribute('all')}
{assign var=path value=$this->getAttribute('flagFolderPath')}

{if count($langs) > 1}
{strip}
<div class="quiqqer-bricks-languageswitch-flag">
    {foreach from=$langs item=lang}
    {if $all || $siteLang != $lang}

    {assign var=activeLang value=''}
    {if $siteLang == $lang}
        {assign var=activeLang value='active'}
    {/if}

    {assign var=siteId value=1}
    {if $Site->getId($lang)}
        {assign var=siteId value=$Site->getId($lang)}
    {/if}

    <a class="quiqqer-bricks-languageswitch-flag-entry {$activeLang}" href="{url id=$siteId lang=$lang}">
        {if $this->getAttribute('showFlags')}
        <span class="quiqqer-bricks-languageswitch-flag-entry-icon">
            <img src="{$path}{$lang}.png"
                 alt="{locale group='quiqqer/core' var='language.'|cat:$lang}"
                 title="{locale group='quiqqer/core' var='language.'|cat:$lang}"
            />
        </span>
        {/if}

        {if $this->getAttribute('showText')}
        <span class="quiqqer-bricks-languageswitch-flag-entry-text">
            {$lang}
        </span>
        {/if}
    </a>
    {/if}
    {/foreach}
</div>
{/strip}
{/if}