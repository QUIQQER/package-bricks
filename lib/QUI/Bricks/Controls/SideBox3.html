
<div class="quiqqer-bricks-sidebox3">

    {if $this->getAttribute('content')}
    <div class="quiqqer-bricks-sidebox3-content">
        {$this->getAttribute('content')}
    </div>
    {/if}

    <div class="quiqqer-bricks-sidebox3-row">

        {foreach from=$children item=Child key=key}
        <article class="quiqqer-bricks-sidebox3-article">
            {if $this->getAttribute( 'showImage' )}
            <a href="{url site=$Child}" class="image">
                {image src=$Child->getAttribute('image_site') width=640}
            </a>
            {/if}

            {if $this->getAttribute( 'showTitle' ) || $this->getAttribute( 'showShort' )}
            <header>
                {if $this->getAttribute( 'showTitle' )}
                <h3>
                    <a href="{url site=$Child}">
                        {$Child->getAttribute('title')}
                    </a>
                </h3>
                {/if}
            </header>
            {/if}

            {if $this->getAttribute( 'showShort' )}
            <p>
                {text_passage text=$Child->getAttribute('short') start=0 end=120 striphtml=true append="..."}
            </p>
            {/if}

            {if $this->getAttribute( 'showContent' )}
                {$Child->getAttribute('content')}
            {/if}

            <footer class="article-button">
                <a href="{url site=$Child}" class="button">
                    {locale group="quiqqer/bricks" var="continue.reading"}
                </a>
            </footer>
        </article>

        {assign var=modKey value=$key+1}
        {if $modKey && $modKey % 3 === 0 && !$Child@last}
            </div>
            <div class="quiqqer-bricks-sidebox3-row">
        {/if}

        {/foreach}
    </div>
</div>
